{"version":3,"names":["screenWidth","Dimensions","get","width","Pager","color","index","length","styles","pager","Array","from","map","_","i","current","opacity","size","bullet","backgroundColor","height","Carousel","data","children","dotColor","style","rest","setIndex","React","useState","Children","count","itemsLength","slides","isArray","StyleSheet","flatten","slideWidth","slideHeight","container","nativeEvent","layoutWidth","layoutMeasurement","offset","contentOffset","x","currentIndex","Math","ceil","item","uri","child","s","props","cloneElement","create","position","bottom","left","right","flexDirection","justifyContent","alignItems","marginHorizontal","borderRadius","withTheme"],"sources":["Carousel.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { withTheme } from \"../theming\";\nimport {\n  ScrollView,\n  View,\n  StyleSheet,\n  Dimensions,\n  StyleProp,\n  ViewStyle,\n} from \"react-native\";\nimport Image from \"./Image\";\n\nconst screenWidth = Dimensions.get(\"window\").width;\n\ntype Props = {\n  data?: any[];\n  children?: React.ReactNode;\n  style?: StyleProp<ViewStyle>;\n  dotColor?: string;\n  theme: any;\n};\n\nfunction Pager({\n  color,\n  index,\n  length,\n}: {\n  color: string;\n  index: number;\n  length: number;\n}) {\n  return (\n    <View style={styles.pager}>\n      {Array.from({ length }).map((_, i) => {\n        const current = index === i;\n        const opacity = current ? 1 : 0.5;\n        const size = current ? 10 : 8;\n        return (\n          <View\n            key={i}\n            style={[\n              styles.bullet,\n              { backgroundColor: color, opacity, width: size, height: size },\n            ]}\n          />\n        );\n      })}\n    </View>\n  );\n}\n\nfunction Carousel({\n  data,\n  children,\n  dotColor = \"strong\",\n  style,\n  ...rest\n}: React.PropsWithChildren<Props>) {\n  const [index, setIndex] = React.useState(0);\n\n  const length = React.Children.count(children);\n  const itemsLength = (data?.length ?? 0) + length;\n  const slides = Array.isArray(data) ? data : [];\n\n  const { width, height } = StyleSheet.flatten(style || {});\n  const slideWidth = width || screenWidth;\n  const slideHeight = height || 250;\n\n  return (\n    <View style={[styles.container, style]} {...rest}>\n      <ScrollView\n        pagingEnabled\n        horizontal\n        decelerationRate=\"fast\"\n        scrollEventThrottle={200}\n        showsHorizontalScrollIndicator={false}\n        onScroll={({ nativeEvent }) => {\n          const layoutWidth = nativeEvent.layoutMeasurement.width;\n          const offset = nativeEvent.contentOffset.x;\n          const currentIndex = Math.ceil(offset / layoutWidth);\n          setIndex(currentIndex);\n        }}\n      >\n        {slides.length > 0\n          ? slides.map((item, i) => {\n              return (\n                <Image\n                  key={i}\n                  resizeMode=\"cover\"\n                  source={typeof item === \"string\" ? { uri: item } : item}\n                  style={[{ width: slideWidth, height: slideHeight }]}\n                />\n              );\n            })\n          : null}\n        {React.Children.map(children, (child: any) => {\n          const s = child?.props?.style || {};\n          return (\n            <View style={{ width: slideWidth }}>\n              {React.cloneElement(child, {\n                style: { ...s, width: slideWidth },\n              })}\n            </View>\n          );\n        })}\n      </ScrollView>\n      <Pager color={dotColor} index={index} length={itemsLength} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#eee\",\n  },\n  pager: {\n    position: \"absolute\",\n    bottom: 12,\n    left: 0,\n    right: 0,\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  bullet: {\n    marginHorizontal: 2,\n    width: 10,\n    height: 10,\n    borderRadius: 20,\n    backgroundColor: \"#000\",\n  },\n});\n\nexport default withTheme(Carousel);\n"],"mappings":"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"}