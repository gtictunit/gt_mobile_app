{"version":3,"names":["React","View","StyleSheet","Pressable","withTheme","StarRating","Icon","starSize","maxStars","rating","defaultValue","isEditable","activeColor","inactiveColor","style","onPress","rest","localRating","setLocalRating","useState","useEffect","ratingHandler","useCallback","r","ratingRounded","Math","round","styles","container","Array","map","_","i","display","touchContainer","pressable","create","flexDirection","alignItems","position","top","right","left","bottom","zIndex","flex","height","width"],"sources":["StarRating.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {\n  View,\n  StyleSheet,\n  StyleProp,\n  ViewStyle,\n  Pressable,\n} from \"react-native\";\nimport { withTheme } from \"../theming\";\nimport type { Theme } from \"../styles/DefaultTheme\";\nimport type { IconSlot } from \"../interfaces/Icon\";\n\ntype Props = {\n  starSize?: number;\n  maxStars?: number;\n  rating?: number;\n  defaultValue?: number;\n  isEditable?: boolean;\n  activeColor?: string;\n  inactiveColor?: string;\n  theme: Theme;\n  style?: StyleProp<ViewStyle>;\n  onPress?: (newValue: number) => void;\n} & IconSlot;\n\nconst StarRating: React.FC<React.PropsWithChildren<Props>> = ({\n  Icon,\n  starSize = 16,\n  maxStars = 5,\n  rating = 0,\n  defaultValue,\n  isEditable = false,\n  activeColor,\n  inactiveColor,\n  style,\n  onPress,\n  ...rest\n}) => {\n  const [localRating, setLocalRating] = React.useState<number>(\n    rating || defaultValue || 0\n  );\n\n  React.useEffect(() => {\n    if (rating != null) {\n      setLocalRating(rating);\n    }\n  }, [rating]);\n\n  React.useEffect(() => {\n    if (defaultValue != null) {\n      setLocalRating(defaultValue);\n    }\n  }, [defaultValue]);\n\n  const ratingHandler = React.useCallback(\n    (r: number) => {\n      setLocalRating(r);\n      !!onPress && onPress(r);\n    },\n    [onPress]\n  );\n\n  const ratingRounded = Math.round(localRating * 2) / 2;\n\n  return (\n    <View style={[styles.container, style]} {...rest}>\n      {[...Array(maxStars)].map((_, i) => (\n        <View key={i} style={{ display: \"flex\" }}>\n          <Icon\n            name={\n              ratingRounded - i === 0.5\n                ? \"MaterialIcons/star-half\"\n                : \"MaterialIcons/star\"\n            }\n            size={starSize}\n            color={ratingRounded > i ? activeColor : inactiveColor}\n          />\n          {isEditable && (\n            <View style={styles.touchContainer}>\n              <Pressable\n                style={styles.pressable}\n                onPress={() => ratingHandler(i + 0.5)}\n              />\n              <Pressable\n                style={styles.pressable}\n                onPress={() => ratingHandler(i + 1)}\n              />\n            </View>\n          )}\n        </View>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n  },\n  touchContainer: {\n    display: \"flex\",\n    flexDirection: \"row\",\n    position: \"absolute\",\n    top: 0,\n    right: 0,\n    left: 0,\n    bottom: 0,\n    zIndex: 1,\n  },\n  pressable: {\n    flex: 1,\n    height: \"100%\",\n    width: \"50%\",\n  },\n});\n\nexport default withTheme(StarRating);\n"],"mappings":"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"}