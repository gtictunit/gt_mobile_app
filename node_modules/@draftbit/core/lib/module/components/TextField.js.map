{"version":3,"names":["React","View","Animated","TextInput","NativeTextInput","StyleSheet","Text","I18nManager","withTheme","applyStyles","extractStyles","AnimatedText","createAnimatedComponent","FOCUS_ANIMATION_DURATION","BLUR_ANIMATION_DURATION","ICON_SIZE","TextField","Component","labeled","Value","props","value","error","focused","placeholder","labelLayout","measured","width","setTimeout","clearTimeout","_timer","setState","timing","state","toValue","duration","useNativeDriver","start","disabled","onChangeText","nativeEvent","text","undefined","getDerivedStateFromProps","nextProps","prevState","componentDidMount","defaultValue","_handleChangeText","_minmizeLabel","componentDidUpdate","prevProps","_restoreLabel","label","_showPlaceholder","_hidePlaceholder","componentWillUnmount","toggleFocus","setNativeProps","args","_root","isFocused","clear","focus","blur","render","Icon","type","leftIconName","leftIconMode","rightIconName","assistiveText","underlineColor","underlineColorProp","activeBorderColor","activeBorderColorProp","multiline","numberOfLines","style","theme","colors","typography","roundness","disabledOpacity","rest","MINIMIZED_LABEL_Y_OFFSET","caption","lineHeight","OUTLINE_MINIMIZED_LABEL_Y_OFFSET","MAXIMIZED_LABEL_FONT_SIZE","subtitle1","fontSize","MINIMIZED_LABEL_FONT_SIZE","hasActiveOutline","inputTextColor","activeColor","borderColor","placeholderColor","containerStyle","backgroundColor","inputStyle","strong","light","divider","background","placeholderTextColor","paddingVertical","color","paddingLeft","paddingRight","height","assistiveTextLeftMargin","borderTopLeftRadius","borderTopRightRadius","paddingBottom","marginTop","borderRadius","borderWidth","paddingTop","opacity","paddingHorizontal","marginLeft","leftIconColor","primary","leftIconProps","size","name","leftIconStyle","position","labelStyle","top","left","transform","translateY","interpolate","inputRange","outputRange","scale","translateX","textStyles","inputStyles","styles","input","marginHorizontal","bgColor","padding","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderCol","styleProp","flatten","container","underline","scaleY","absoluteFill","e","layout","justifyContent","ref","c","onChange","editable","selectionColor","onFocus","_handleFocus","onBlur","_handleBlur","underlineColorAndroid","right","create","alignSelf","bottom","flexGrow","textAlignVertical","margin","textAlign","isRTL"],"sources":["TextField.tsx"],"sourcesContent":["import * as React from \"react\";\nimport {\n  View,\n  Animated,\n  TextInput as NativeTextInput,\n  StyleSheet,\n  Text,\n  I18nManager,\n  StyleProp,\n  TextInputProps,\n  NativeSyntheticEvent,\n  TextInputChangeEventData,\n  ViewStyle,\n  TextStyle,\n  LayoutChangeEvent,\n  ImageStyle,\n} from \"react-native\";\nimport { withTheme } from \"../theming\";\nimport type { Theme } from \"../styles/DefaultTheme\";\nimport type { IconSlot } from \"../interfaces/Icon\";\nimport { applyStyles, extractStyles } from \"../utilities\";\n\nconst AnimatedText = Animated.createAnimatedComponent(Text);\n\nconst FOCUS_ANIMATION_DURATION = 150;\nconst BLUR_ANIMATION_DURATION = 180;\nconst ICON_SIZE = 24;\n\nexport type Props = {\n  type?: \"solid\" | \"underline\";\n  defaultValue?: string;\n  disabled?: boolean;\n  label?: string;\n  error?: boolean;\n  leftIconName?: string;\n  leftIconMode?: \"inset\" | \"outset\";\n  onChangeText: (\n    text: string | NativeSyntheticEvent<TextInputChangeEventData>\n  ) => void;\n  rightIconName?: string;\n  assistiveText?: string;\n  multiline?: boolean;\n  numberOfLines: number;\n  underlineColor?: string;\n  activeBorderColor?: string;\n  style?: StyleProp<ViewStyle> & { height?: number };\n  theme: Theme;\n  render?: (\n    props: TextInputProps & { ref: (c: NativeTextInput) => void }\n  ) => React.ReactNode;\n} & TextInputProps &\n  IconSlot;\n\ninterface State {\n  labeled: Animated.Value;\n  focused?: boolean;\n  placeholder?: string | undefined;\n  labelLayout: {\n    measured: boolean;\n    width: number;\n  };\n  value?: string;\n}\n\nclass TextField extends React.Component<Props, State> {\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n    return {\n      value:\n        typeof nextProps.value !== \"undefined\"\n          ? nextProps.value\n          : prevState.value,\n    };\n  }\n\n  state: State = {\n    labeled: new Animated.Value(this.props.value || this.props.error ? 0 : 1),\n    focused: false,\n    placeholder: this.props.error ? this.props.placeholder : \"\",\n    labelLayout: {\n      measured: false,\n      width: 0,\n    },\n  };\n\n  componentDidMount() {\n    if (this.props.defaultValue) {\n      this._handleChangeText(this.props.defaultValue);\n    }\n\n    if (this.props.placeholder) {\n      this._minmizeLabel();\n    }\n  }\n\n  componentDidUpdate(prevProps: Props, prevState: State) {\n    if (\n      prevState.focused !== this.state.focused ||\n      prevState.value !== this.state.value\n    ) {\n      // The label should be minimized if the text input is focused, or has text\n      // In minimized mode, the label moves up and becomes small\n      if (\n        this.state.value ||\n        this.state.focused ||\n        this.props.error ||\n        this.props.placeholder\n      ) {\n        this._minmizeLabel();\n      } else {\n        this._restoreLabel();\n      }\n    }\n\n    if (\n      prevState.focused !== this.state.focused ||\n      prevProps.label !== this.props.label\n    ) {\n      // Show placeholder text only if the input is focused, or has error, or there's no label\n      // We don't show placeholder if there's a label because the label acts as placeholder\n      // When focused, the label moves up, so we can show a placeholder\n      if (this.state.focused || this.props.error || !this.props.label) {\n        this._showPlaceholder();\n      } else {\n        this._hidePlaceholder();\n      }\n    }\n  }\n\n  _timer = setTimeout(() => {}, 0);\n\n  componentWillUnmount() {\n    clearTimeout(this._timer);\n  }\n\n  _showPlaceholder = () => {\n    clearTimeout(this._timer);\n\n    // Set the placeholder in a delay to offset the label animation\n    // If we show it immediately, they'll overlap and look ugly\n    this._timer = setTimeout(\n      () =>\n        this.setState({\n          placeholder: this.props.placeholder,\n        }),\n      50\n    );\n  };\n\n  _hidePlaceholder = () =>\n    this.setState({\n      placeholder: \"\",\n    });\n\n  _restoreLabel = () =>\n    Animated.timing(this.state.labeled, {\n      toValue: 1,\n      duration: FOCUS_ANIMATION_DURATION,\n      useNativeDriver: true,\n    }).start();\n\n  _minmizeLabel = () =>\n    Animated.timing(this.state.labeled, {\n      toValue: 0,\n      duration: BLUR_ANIMATION_DURATION,\n      useNativeDriver: true,\n    }).start();\n\n  _handleFocus = () => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.setState({ focused: true });\n  };\n\n  _handleBlur = () => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    this.setState({ focused: false });\n  };\n\n  _handleChangeText = (\n    value: NativeSyntheticEvent<TextInputChangeEventData> | string\n  ) => {\n    if (this.props.disabled) {\n      return;\n    }\n\n    if (typeof value === \"string\") {\n      this.setState({ value });\n      this.props.onChangeText && this.props.onChangeText(value);\n    } else {\n      this.setState({ value: value.nativeEvent.text });\n      this.props.onChangeText &&\n        this.props.onChangeText(value.nativeEvent.text);\n    }\n  };\n\n  toggleFocus() {\n    this.setState((prevState: State) => ({ focused: !prevState.focused }));\n  }\n\n  _root: NativeTextInput | undefined = undefined;\n  /**\n   * @internal\n   */\n  setNativeProps(args: Props) {\n    return this._root && this._root.setNativeProps(args);\n  }\n\n  isFocused() {\n    return this._root && this._root.isFocused();\n  }\n\n  clear() {\n    return this._root && this._root.clear();\n  }\n\n  focus() {\n    return this._root && this._root.focus();\n  }\n\n  blur() {\n    return this._root && this._root.blur();\n  }\n\n  render() {\n    const {\n      Icon,\n      type = \"underline\",\n      disabled = false,\n      label,\n      error = false,\n      leftIconName,\n      leftIconMode,\n      rightIconName,\n      assistiveText,\n      underlineColor: underlineColorProp,\n      activeBorderColor: activeBorderColorProp,\n      multiline = false,\n      numberOfLines = 4,\n      style,\n      theme: { colors, typography, roundness, disabledOpacity },\n      render = (props) => <NativeTextInput {...props} />,\n      ...rest\n    } = this.props;\n\n    const MINIMIZED_LABEL_Y_OFFSET = -(typography.caption.lineHeight + 4);\n    const OUTLINE_MINIMIZED_LABEL_Y_OFFSET = -(16 * 0.5 + 4);\n    const MAXIMIZED_LABEL_FONT_SIZE = typography.subtitle1.fontSize;\n    const MINIMIZED_LABEL_FONT_SIZE = typography.caption.fontSize;\n\n    const hasActiveOutline = this.state.focused || error;\n\n    let inputTextColor,\n      activeColor,\n      underlineColor,\n      borderColor,\n      placeholderColor,\n      containerStyle: StyleProp<ViewStyle>,\n      backgroundColor,\n      inputStyle: StyleProp<TextStyle>;\n\n    inputTextColor = colors.strong;\n    if (disabled) {\n      activeColor = colors.light;\n      placeholderColor = colors.light;\n      borderColor = \"transparent\";\n      underlineColor = \"transparent\";\n      backgroundColor = colors.divider;\n    } else {\n      activeColor = error ? colors.error : activeBorderColorProp;\n      placeholderColor = borderColor = colors.light;\n      underlineColor = underlineColorProp;\n      backgroundColor = colors.background;\n    }\n\n    if (rest.placeholderTextColor) {\n      placeholderColor = rest.placeholderTextColor;\n    }\n\n    const { lineHeight, ...subtitle1 } = typography.subtitle1;\n\n    inputStyle = {\n      paddingVertical: 0,\n      color: inputTextColor,\n      paddingLeft:\n        leftIconName && leftIconMode === \"inset\"\n          ? ICON_SIZE + 12 + (type === \"solid\" ? 16 : 0)\n          : 0,\n      paddingRight: rightIconName ? ICON_SIZE + 16 + 4 : 12,\n      ...subtitle1,\n    };\n\n    if (!multiline) {\n      inputStyle.height = lineHeight;\n    }\n\n    let assistiveTextLeftMargin;\n    if (type === \"underline\") {\n      containerStyle = {\n        borderTopLeftRadius: roundness,\n        borderTopRightRadius: roundness,\n        paddingBottom: 12,\n        marginTop: 16,\n      };\n\n      if (leftIconName && leftIconMode === \"outset\") {\n        assistiveTextLeftMargin = ICON_SIZE + 8;\n      } else {\n        assistiveTextLeftMargin = 0;\n      }\n    } else {\n      containerStyle = {\n        borderRadius: roundness,\n        borderColor: hasActiveOutline ? activeColor : borderColor,\n        borderWidth: 1,\n        paddingTop: label ? 16 * 1.5 : 16,\n        paddingBottom: label ? 16 * 0.5 : 16,\n        opacity: disabled ? disabledOpacity : 1,\n        backgroundColor,\n      };\n\n      if (leftIconName && leftIconMode === \"inset\") {\n        assistiveTextLeftMargin = 16 + 4;\n      } else if (leftIconName && leftIconMode === \"outset\") {\n        assistiveTextLeftMargin = ICON_SIZE + 8 + 12;\n      } else {\n        assistiveTextLeftMargin = 12;\n      }\n\n      inputStyle.paddingHorizontal = 12;\n    }\n\n    if (leftIconName && leftIconMode === \"outset\") {\n      containerStyle.marginLeft = ICON_SIZE + 8;\n    }\n\n    let leftIconColor;\n    if (error) {\n      leftIconColor = colors.error;\n    } else if (this.state.focused) {\n      leftIconColor = colors.primary;\n    } else {\n      leftIconColor = colors.light;\n    }\n\n    const leftIconProps = {\n      size: 24,\n      color: leftIconColor,\n      name: leftIconName || \"\",\n    };\n\n    const leftIconStyle: ImageStyle = {\n      position: \"absolute\",\n      marginTop:\n        type === \"solid\"\n          ? MINIMIZED_LABEL_FONT_SIZE + 4\n          : leftIconMode === \"outset\"\n          ? 16\n          : 0,\n      marginLeft: leftIconMode === \"inset\" && type === \"solid\" ? 16 : 0,\n    };\n\n    const labelStyle = {\n      ...typography.subtitle1,\n      top: type === \"solid\" ? 16 : 0,\n      left:\n        leftIconName && leftIconMode === \"inset\"\n          ? ICON_SIZE + (type === \"solid\" ? 16 : 12)\n          : 0,\n      transform: [\n        {\n          // Move label to top\n          translateY: this.state.labeled.interpolate({\n            inputRange: [0, 1],\n            outputRange: [\n              type === \"solid\"\n                ? OUTLINE_MINIMIZED_LABEL_Y_OFFSET\n                : MINIMIZED_LABEL_Y_OFFSET,\n              0,\n            ],\n          }),\n        },\n        {\n          // Make label smaller\n          scale: this.state.labeled.interpolate({\n            inputRange: [0, 1],\n            outputRange: [\n              MINIMIZED_LABEL_FONT_SIZE / MAXIMIZED_LABEL_FONT_SIZE,\n              1,\n            ],\n          }),\n        },\n        {\n          // Offset label scale since RN doesn't support transform origin\n          translateX: this.state.labeled.interpolate({\n            inputRange: [0, 1],\n            outputRange: [\n              -(1 - MINIMIZED_LABEL_FONT_SIZE / MAXIMIZED_LABEL_FONT_SIZE) *\n                (this.state.labelLayout.width / 2),\n              0,\n            ],\n          }),\n        },\n      ],\n    };\n\n    const { textStyles } = extractStyles(style);\n    const inputStyles = applyStyles(\n      [\n        styles.input,\n        inputStyle,\n        type === \"solid\" ? { marginHorizontal: 12 } : {},\n      ],\n      textStyles\n    );\n\n    const {\n      backgroundColor: bgColor,\n      padding,\n      paddingTop,\n      paddingBottom,\n      paddingLeft,\n      paddingRight,\n      borderRadius,\n      borderWidth,\n      borderTopWidth,\n      borderRightWidth,\n      borderBottomWidth,\n      borderLeftWidth,\n      borderColor: borderCol,\n      ...styleProp\n    } = StyleSheet.flatten(style || {}) as ViewStyle & { height?: number };\n\n    return (\n      <View style={[styles.container, styleProp]}>\n        {leftIconName && leftIconMode === \"outset\" ? (\n          <Icon {...leftIconProps} style={leftIconStyle} />\n        ) : null}\n        <View\n          style={applyStyles([containerStyle], {\n            height: style?.height,\n            backgroundColor: bgColor,\n            padding,\n            paddingTop,\n            paddingBottom,\n            paddingLeft,\n            paddingRight,\n            borderRadius,\n            borderWidth,\n            borderTopWidth,\n            borderRightWidth,\n            borderBottomWidth,\n            borderLeftWidth,\n            borderColor: borderCol,\n          })}\n        >\n          {type === \"underline\" ? (\n            // When type === 'flat', render an underline\n            <Animated.View\n              style={[\n                styles.underline,\n                {\n                  backgroundColor:\n                    bgColor ||\n                    (error\n                      ? colors.error\n                      : this.state.focused\n                      ? activeColor\n                      : underlineColor),\n                  // Underlines is thinner when input is not focused\n                  transform: [{ scaleY: this.state.focused ? 1 : 0.5 }],\n                },\n              ]}\n            />\n          ) : null}\n\n          {label ? (\n            // Position colored placeholder and gray placeholder on top of each other and crossfade them\n            // This gives the effect of animating the color, but allows us to use native driver\n            <View\n              pointerEvents=\"none\"\n              style={[\n                StyleSheet.absoluteFill,\n                {\n                  opacity:\n                    // Hide the label in minimized state until we measure its width\n                    this.state.value || this.state.focused\n                      ? this.state.labelLayout.measured\n                        ? 1\n                        : 0\n                      : 1,\n                },\n              ]}\n            >\n              <AnimatedText\n                onLayout={(e: LayoutChangeEvent) =>\n                  this.setState({\n                    labelLayout: {\n                      width: e.nativeEvent.layout.width,\n                      measured: true,\n                    },\n                  })\n                }\n                style={[\n                  styles.placeholder,\n                  type === \"solid\" ? { paddingHorizontal: 12 } : {},\n                  labelStyle,\n                  {\n                    color: placeholderColor,\n                    opacity: this.state.labeled.interpolate({\n                      inputRange: [0, 1],\n                      outputRange: [hasActiveOutline ? 1 : 0, 0],\n                    }),\n                  },\n                ]}\n                numberOfLines={1}\n              >\n                {label}\n              </AnimatedText>\n              <AnimatedText\n                style={[\n                  styles.placeholder,\n                  type === \"solid\" ? { paddingHorizontal: 12 } : {},\n                  labelStyle,\n                  {\n                    color: placeholderColor,\n                    opacity: hasActiveOutline ? this.state.labeled : 1,\n                  },\n                ]}\n                numberOfLines={1}\n              >\n                {label}\n              </AnimatedText>\n            </View>\n          ) : null}\n\n          {leftIconName && leftIconMode === \"inset\" ? (\n            <View\n              style={{\n                justifyContent: type === \"solid\" ? \"center\" : undefined,\n              }}\n            >\n              <Icon {...leftIconProps} style={leftIconStyle} />\n            </View>\n          ) : null}\n\n          {render({\n            ref: (c: NativeTextInput) => {\n              this._root = c;\n            },\n            onChange: this._handleChangeText,\n            placeholder: label\n              ? this.state.placeholder\n              : this.props.placeholder,\n            placeholderTextColor: placeholderColor,\n            editable: !disabled,\n            selectionColor: activeColor,\n            multiline,\n            numberOfLines,\n            onFocus: this._handleFocus,\n            onBlur: this._handleBlur,\n            underlineColorAndroid: \"transparent\",\n            style: inputStyles,\n            ...rest,\n            value: this.state.value,\n          })}\n        </View>\n        {rightIconName ? (\n          <Icon\n            name={rightIconName}\n            size={ICON_SIZE}\n            color={colors.light}\n            style={{\n              position: \"absolute\",\n              right: 16,\n              marginTop: type === \"solid\" ? MINIMIZED_LABEL_FONT_SIZE + 4 : 16,\n            }}\n          />\n        ) : null}\n\n        {assistiveText ? (\n          <Text\n            style={[\n              {\n                color: error ? colors.error : colors.light,\n                marginTop: 8,\n                marginLeft: assistiveTextLeftMargin,\n              },\n            ]}\n          >\n            {assistiveText}\n          </Text>\n        ) : null}\n      </View>\n    );\n  }\n}\n\nexport default withTheme(TextField);\n\nconst styles = StyleSheet.create({\n  container: {\n    alignSelf: \"stretch\",\n  },\n  placeholder: {\n    position: \"absolute\",\n    left: 0,\n  },\n  underline: {\n    position: \"absolute\",\n    left: 0,\n    right: 0,\n    bottom: 0,\n    height: 2,\n  },\n  input: {\n    flexGrow: 1,\n    justifyContent: \"center\",\n    textAlignVertical: \"center\",\n    margin: 0,\n    textAlign: I18nManager.isRTL ? \"right\" : \"left\",\n  },\n});\n"],"mappings":"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"}